# Bookmarks Analysis 需求文档（PRD）

## 1. 产品定位

Bookmarks Analysis 是一款 **Local-first / 隐私优先** 的书签资产管理与分析工具：

- 书签数据 **只在本地浏览器内处理与存储**（IndexedDB）。
- 支持从多个浏览器导出的 Netscape Bookmark HTML 文件导入、合并、去重与导出。
- 提供搜索、统计洞察与重复簇工作台，帮助用户整理书签资产。

### 核心原则

- **零云端依赖**：默认不引入任何必须的后端服务。
- **可解释、可审查**：导出结果为标准 HTML/结构化数据，便于用户审查。
- **渐进增强**：性能/AI 等增强能力以“可选能力”形式引入，不影响核心流程。

## 2. 用户与典型场景

### 目标用户

- 多浏览器/多设备用户（Chrome/Edge/Firefox/Safari 等）。
- 有书签“重复、分类混乱、检索困难”的整理需求。
- 需要离线使用或不希望上传个人数据。

### 典型流程

- 导出多个浏览器书签 HTML → 导入应用 → 合并去重 → 搜索/过滤/洞察 → 导出（回导浏览器/备份）

## 3. 当前版本现状（与文档一致性）

当前已具备：导入、合并去重、IndexedDB 持久化、搜索、仪表盘、重复簇展示、HTML 导出、PWA。

需要统一的问题：

- 高价值的 P0 体验项（例如 **高级过滤**、**导出选项（按筛选导出）**、更细的加载状态等）仍需补齐，确保“文档 = 产品真实能力”（拖拽导入与搜索高亮已补齐）。
- README Roadmap 需要做范围裁剪，避免长期“清单堆积”。

## 4. Roadmap 范围裁剪（我建议的取舍）

下面按“用户价值 / 实现复杂度 / 与 Local-first 一致性”综合评估。

### 4.1 必做（P0）

- **P0-1 导入体验补齐**
  - 真正支持拖拽导入（Dropzone + 视觉反馈）。
  - 展示已选择文件列表（可移除/清空）。
  - 解析/合并的加载状态更细（进度或阶段提示）。

- **P0-2 搜索体验升级**
  - 结果中高亮命中词（标题/URL/路径）。
  - 空状态、键盘交互、结果信息密度优化。

- **P0-3 高级过滤（强烈建议纳入核心）**
  - 按域名、目录、时间范围过滤（与搜索可组合）。
  - 价值高、复杂度可控、显著提升“可用性”。

- **P0-4 导出能力完善（仍保持零后端）**
  - HTML 导出保持现有能力。
  - 导出时可选：
    - 全量/筛选后的子集
    - 保留/不保留目录结构

### 4.2 推荐做（P1）

- **P1-1 多格式导出**（高性价比）
  - JSON / CSV / Markdown 导出。

- **P1-2 备份与恢复**（Local-first 的关键闭环）
  - 导出/导入 IndexedDB 数据（例如 JSON 备份包），方便迁移设备。

- **P1-3 Web Worker 性能增强**（按数据规模决定是否提前）
  - 解析/统计/索引构建放到 Worker，避免主线程卡顿。

### 4.3 可选增强（P2）

- **P2-1 AI 智能分析**（建议降级为“可选插件能力”）
  - 原因：
    - 纯前端直连第三方 LLM API 通常存在 CORS/安全策略限制。
    - 需要定义清晰的“输入/输出/隐私边界”，避免误导。
  - 建议形态：
    - 先做“本地生成报告模板 + 可复制 Prompt”，再考虑适配器式直连。

- **P2-2 批量编辑/标签系统**（大功能，后置）
  - 会引入复杂的数据编辑、冲突处理与更重的 UI。

### 4.4 归档/废弃（建议移出主 Roadmap）

- **Cytoscape 关系网络图**：
  - 用户价值不稳定、实现与交互成本高。
  - 建议从主 Roadmap 移除，若未来确有需求再以实验分支/插件形式引入。

## 5. 验收标准（核心体验）

- **导入/合并**：
  - 支持点击选择 + 拖拽导入；错误提示明确；合并完成后数据持久化。
- **搜索/过滤**：
  - 1000+ 条书签下输入与结果渲染无明显卡顿；命中词高亮；过滤条件可组合。
- **导出**：
  - 可导出合并结果（以及按筛选导出）；文件命名清晰；导出的 HTML 可被主流浏览器正常导入。
- **文档一致性**：
  - `/docs` 与 README 反映的功能与实际一致。
